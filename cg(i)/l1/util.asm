

	.model	small		; small memory model - separate code and data sections
	.386
	.stack	4096

.data

mode_choose_message_string DB 'W','E','L','C','O','M','E','!',' ','C','H','O','O','S','E',' ','W','O','R','K','I','N','G',' ','M','O','D','E',':',' '
draw_line_message_x_string DB 'E','N','T','E','R',' ','X',':',' '
draw_line_message_y_string DB 'E','N','T','E','R',' ','Y',':',' '
draw_line_message_l_string DB 'E','N','T','E','R',' ','L',':',' '
draw_line_message_r_string DB 'E','N','T','E','R',' ','R',':',' '
draw_line_message_md_string DB 'E','N','T','E','R',' ','M','O','D','E',':',' '
draw_line_message_x1_string DB 'E','N','T','E','R',' ','X','1',':',' '
draw_line_message_y1_string DB 'E','N','T','E','R',' ','Y','1',':',' '
draw_line_message_x2_string DB 'E','N','T','E','R',' ','X','2',':',' '
draw_line_message_y2_string DB 'E','N','T','E','R',' ','Y','2',':',' '

OFFST 	DW 0000000000000000b

LETTERS DW 0000000000000000b ; blank
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		
		DW 0000000000000000b ; !
		DW 0010000000000000b
		DW 0010000000000000b
		DW 0010000000000000b
		DW 0010000000000000b
		DW 0010000000000000b
		DW 0010000000000000b
		DW 0010000000000000b
		DW 0010000000000000b
		DW 0010000000000000b
		DW 0000000000000000b
		DW 0010000000000000b
		DW 0010000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0100010000000000b ; "
		DW 0100010000000000b
		DW 0100010000000000b
		DW 0100010000000000b
		DW 0100010000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; #
		DW 0000001000100000b
		DW 0000001000100000b
		DW 0000001000100000b
		DW 0001111111110000b
		DW 0000010001000000b
		DW 0000010001000000b
		DW 0000100010000000b
		DW 0000100010000000b
		DW 0011111111100000b
		DW 0001000100000000b
		DW 0001000100000000b
		DW 0001000100000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000100000000000b ; $
		DW 0000100000000000b
		DW 0001111100000000b
		DW 0010100010000000b
		DW 0100100000000000b
		DW 0100100000000000b
		DW 0010100000000000b
		DW 0001111000000000b
		DW 0000100100000000b
		DW 0000100010000000b
		DW 0000100010000000b
		DW 0100100100000000b
		DW 0011111000000000b
		DW 0000100000000000b
		DW 0000100000000000b
		DW 0000100000000000b

		DW 0000000000000000b ; %
		DW 0011110000010000b
		DW 0100001000100000b
		DW 0100001000100000b
		DW 0100001001000000b
		DW 0100001001000000b
		DW 0100001010000000b
		DW 0011110010011110b
		DW 0000000100100001b
		DW 0000000100100001b
		DW 0000001000100001b
		DW 0000001000100001b
		DW 0000010000100001b
		DW 0000000000011110b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; &
		DW 0001111000000000b
		DW 0010000100000000b
		DW 0010000100000000b
		DW 0010000100000000b
		DW 0001001000000000b
		DW 0001110001000000b
		DW 0010010001000000b
		DW 0100001001000000b
		DW 0100000101000000b
		DW 0100000010000000b
		DW 0010000101000000b
		DW 0001111000100000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0100000000000000b ; '
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000010000000000b ; (
		DW 0000100000000000b
		DW 0001000000000000b
		DW 0010000000000000b
		DW 0010000000000000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0010000000000000b
		DW 0010000000000000b
		DW 0001000000000000b
		DW 0000100000000000b
		DW 0000010000000000b

		DW 0100000000000000b ; )
		DW 0010000000000000b
		DW 0001000000000000b
		DW 0000100000000000b
		DW 0000100000000000b
		DW 0000010000000000b
		DW 0000010000000000b
		DW 0000010000000000b
		DW 0000010000000000b
		DW 0000010000000000b
		DW 0000010000000000b
		DW 0000100000000000b
		DW 0000100000000000b
		DW 0001000000000000b
		DW 0010000000000000b
		DW 0100000000000000b

		DW 0000100000000000b ; *
		DW 0100100100000000b
		DW 0010101000000000b
		DW 0001110000000000b
		DW 0010101000000000b
		DW 0100100100000000b
		DW 0000100000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; +
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000001000000000b
		DW 0000001000000000b
		DW 0000001000000000b
		DW 0000001000000000b
		DW 0011111111100000b
		DW 0000001000000000b
		DW 0000001000000000b
		DW 0000001000000000b
		DW 0000001000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; ,
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0010000000000000b
		DW 0010000000000000b
		DW 0010000000000000b
		DW 0100000000000000b
		DW 0100000000000000b

		DW 0000000000000000b ; -
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0111110000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; .
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0010000000000000b
		DW 0010000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000001000000000b ; /
		DW 0000010000000000b
		DW 0000010000000000b
		DW 0000010000000000b
		DW 0000100000000000b
		DW 0000100000000000b
		DW 0001000000000000b
		DW 0001000000000000b
		DW 0001000000000000b
		DW 0010000000000000b
		DW 0010000000000000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 1000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; 0
		DW 0001111000000000b
		DW 0010000100000000b
		DW 0100000010000000b
		DW 0100000010000000b
		DW 0100000010000000b
		DW 0100000010000000b
		DW 0100000010000000b
		DW 0100000010000000b
		DW 0100000010000000b
		DW 0100000010000000b
		DW 0010000100000000b
		DW 0001111000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; 1
		DW 0000100000000000b
		DW 0000100000000000b
		DW 0011100000000000b
		DW 0000100000000000b
		DW 0000100000000000b
		DW 0000100000000000b
		DW 0000100000000000b
		DW 0000100000000000b
		DW 0000100000000000b
		DW 0000100000000000b
		DW 0000100000000000b
		DW 0011111000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; 2
		DW 0011111000000000b
		DW 0100000100000000b
		DW 0000000010000000b
		DW 0000000010000000b
		DW 0000000010000000b
		DW 0000000100000000b
		DW 0000001000000000b
		DW 0000010000000000b
		DW 0000100000000000b
		DW 0001000000000000b
		DW 0010000000000000b
		DW 0111111110000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; 3
		DW 0011111000000000b
		DW 0100000100000000b
		DW 0000000010000000b
		DW 0000000010000000b
		DW 0000000100000000b
		DW 0000111000000000b
		DW 0000000100000000b
		DW 0000000010000000b
		DW 0000000010000000b
		DW 0000000010000000b
		DW 0100000100000000b
		DW 0011111000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; 4
		DW 0000000100000000b
		DW 0000001100000000b
		DW 0000010100000000b
		DW 0000100100000000b
		DW 0001000100000000b
		DW 0010000100000000b
		DW 0100000100000000b
		DW 0100000100000000b
		DW 0111111111000000b
		DW 0000000100000000b
		DW 0000000100000000b
		DW 0000000100000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; 5
		DW 0011111110000000b
		DW 0010000000000000b
		DW 0010000000000000b
		DW 0010000000000000b
		DW 0011111000000000b
		DW 0000000100000000b
		DW 0000000010000000b
		DW 0000000010000000b
		DW 0000000010000000b
		DW 0000000010000000b
		DW 0100000100000000b
		DW 0011111000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; 6
		DW 0000111100000000b
		DW 0001000000000000b
		DW 0010000000000000b
		DW 0100000000000000b
		DW 0101111000000000b
		DW 0100000100000000b
		DW 0100000010000000b
		DW 0100000010000000b
		DW 0100000010000000b
		DW 0100000010000000b
		DW 0010000100000000b
		DW 0001111000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; 7
		DW 0111111110000000b
		DW 0000000010000000b
		DW 0000000100000000b
		DW 0000000100000000b
		DW 0000001000000000b
		DW 0000001000000000b
		DW 0000010000000000b
		DW 0000010000000000b
		DW 0000100000000000b
		DW 0000100000000000b
		DW 0001000000000000b
		DW 0001000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; 8
		DW 0001111000000000b
		DW 0010000100000000b
		DW 0100000010000000b
		DW 0100000010000000b
		DW 001000100000000b
		DW 0001111000000000b
		DW 0010000100000000b
		DW 0100000010000000b
		DW 0100000010000000b
		DW 0100000010000000b
		DW 0010000100000000b
		DW 0001111000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; 9
		DW 0001111000000000b
		DW 0010000100000000b
		DW 0100000010000000b
		DW 0100000010000000b
		DW 0100000010000000b
		DW 0100000010000000b
		DW 0010000110000000b
		DW 0001111010000000b
		DW 0000000010000000b
		DW 0000000100000000b
		DW 0000001000000000b
		DW 0011110000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; :
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0001000000000000b
		DW 0001000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0001000000000000b
		DW 0001000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; ;
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0001000000000000b
		DW 0001000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0001000000000000b
		DW 0001000000000000b
		DW 0001000000000000b
		DW 0010000000000000b
		DW 0010000000000000b

		DW 0000000000000000b ; <
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000001100000b
		DW 0000000110000000b
		DW 0000011000000000b
		DW 0001100000000000b
		DW 0010000000000000b
		DW 0001100000000000b
		DW 0000011000000000b
		DW 0000000110000000b
		DW 0000000001100000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; =
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0011111111100000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0011111111100000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; >
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0011000000000000b
		DW 0000110000000000b
		DW 0000001100000000b
		DW 0000000011000000b
		DW 0000000000100000b
		DW 0000000011000000b
		DW 0000001100000000b
		DW 0000110000000000b
		DW 0011000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; ?
		DW 0011110000000000b
		DW 0100001000000000b
		DW 0000000100000000b
		DW 0000000100000000b
		DW 0000000100000000b
		DW 0000001000000000b
		DW 0000010000000000b
		DW 0000100000000000b
		DW 0000100000000000b
		DW 0000000000000000b
		DW 0000100000000000b
		DW 0000100000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; @
		DW 0000001111100000b
		DW 0000110000011000b
		DW 0001000000000100b
		DW 0010001111100100b
		DW 0010010000100010b
		DW 0100100000100010b
		DW 0100100000100010b
		DW 0100100000100010b
		DW 0100100000100010b
		DW 0100010001100010b
		DW 0010001110111100b
		DW 0010000000000000b
		DW 0001100000000000b
		DW 0000011111100000b
		DW 0000000000000000b

		DW 0000000000000000b ; A
		DW 0000010000000000b
		DW 0000010000000000b
		DW 0000101000000000b
		DW 0000101000000000b
		DW 0001000100000000b
		DW 0001000100000000b
		DW 0001000100000000b
		DW 0010000010000000b
		DW 0011111110000000b
		DW 0100000001000000b
		DW 0100000001000000b
		DW 0100000001000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; B
		DW 0111111100000000b
		DW 0100000010000000b
		DW 0100000010000000b
		DW 0100000010000000b
		DW 0100000100000000b
		DW 0111111100000000b
		DW 0100000010000000b
		DW 0100000001000000b
		DW 0100000001000000b
		DW 0100000001000000b
		DW 0100000010000000b
		DW 0111111100000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; C
		DW 0000111100000000b
		DW 0011000011000000b
		DW 0010000001000000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0010000001000000b
		DW 0011000011000000b
		DW 0000111100000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; D
		DW 0111111000000000b
		DW 0100000110000000b
		DW 0100000001000000b
		DW 0100000001000000b
		DW 0100000000100000b
		DW 0100000000100000b
		DW 0100000000100000b
		DW 0100000000100000b
		DW 0100000001000000b
		DW 0100000001000000b
		DW 0100000110000000b
		DW 0111111000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; E
		DW 0111111110000000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0111111110000000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0111111110000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; F
		DW 0111111110000000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0111111100000000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; G
		DW 0000111110000000b
		DW 0011000001100000b
		DW 0010000000100000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0100000111100000b
		DW 0100000000100000b
		DW 0100000000100000b
		DW 0010000000100000b
		DW 0011000000100000b
		DW 000011111100000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; H
		DW 0100000000100000b
		DW 0100000000100000b
		DW 0100000000100000b
		DW 0100000000100000b
		DW 0100000000100000b
		DW 0111111111100000b
		DW 0100000000100000b
		DW 0100000000100000b
		DW 0100000000100000b
		DW 0100000000100000b
		DW 0100000000100000b
		DW 0100000000100000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; I
		DW 0111110000000000b
		DW 0001000000000000b
		DW 0001000000000000b
		DW 0001000000000000b
		DW 0001000000000000b
		DW 0001000000000000b
		DW 0001000000000000b
		DW 0001000000000000b
		DW 0001000000000000b
		DW 0001000000000000b
		DW 0001000000000000b
		DW 0111110000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; J
		DW 0011110000000000b
		DW 0000010000000000b
		DW 0000010000000000b
		DW 0000010000000000b
		DW 0000010000000000b
		DW 0000010000000000b
		DW 0000010000000000b
		DW 0000010000000000b
		DW 0000010000000000b
		DW 0000010000000000b
		DW 0000100000000000b
		DW 1111000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; K
		DW 0100000001000000b
		DW 0100000010000000b
		DW 0100000100000000b
		DW 0100001000000000b
		DW 0100010000000000b
		DW 0100100000000000b
		DW 0101100000000000b
		DW 0110010000000000b
		DW 0100001000000000b
		DW 0100000100000000b
		DW 0100000010000000b
		DW 0100000001000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; L
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0111111110000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; M
		DW 0110000000110000b
		DW 0110000000110000b
		DW 0101000001010000b
		DW 0101000001010000b
		DW 0100100010010000b
		DW 0100100010010000b
		DW 0100010100010000b
		DW 0100010100010000b
		DW 0100001000010000b
		DW 0100001000010000b
		DW 0100000000010000b
		DW 0100000000010000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; N
		DW 0100000000100000b
		DW 0110000000100000b
		DW 0101000000100000b
		DW 0100100000100000b
		DW 0100100000100000b
		DW 0100010000100000b
		DW 0100001000100000b
		DW 0100000100100000b
		DW 0100000010100000b
		DW 0100000010100000b
		DW 0100000001100000b
		DW 0100000000100000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; O 
		DW 0000111110000000b
		DW 0011000001100000b
		DW 0010000000100000b
		DW 0100000000010000b
		DW 0100000000010000b
		DW 0100000000010000b
		DW 0100000000010000b
		DW 0100000000010000b
		DW 0100000000010000b
		DW 0010000000100000b
		DW 0011000001100000b
		DW 0000111110000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; P
		DW 0111111000000000b
		DW 0100000100000000b
		DW 0100000010000000b
		DW 0100000010000000b
		DW 0100000010000000b
		DW 0100000010000000b
		DW 0100000100000000b
		DW 0111111000000000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; Q
		DW 0000111110000000b
		DW 0011000001100000b
		DW 0010000000100000b
		DW 0100000000010000b
		DW 0100000000010000b
		DW 0100000000010000b
		DW 0100000000010000b
		DW 0100000000010000b
		DW 0100000000010000b
		DW 0010000000100000b
		DW 0011000001100000b
		DW 0000111110000000b
		DW 0000000100000000b
		DW 0000000100000000b
		DW 0000000011110000b

		DW 0000000000000000b ; R
		DW 0111111000000000b
		DW 0100000100000000b
		DW 0100000010000000b
		DW 0100000010000000b
		DW 0100000010000000b
		DW 0100000100000000b
		DW 0111111000000000b
		DW 0100001000000000b
		DW 0100000100000000b
		DW 0100000010000000b
		DW 0100000001000000b
		DW 0100000000100000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; S
		DW 0001111000000000b
		DW 0010000100000000b
		DW 0100000010000000b
		DW 0100000000000000b
		DW 0100000000000000b
		DW 0011100000000000b
		DW 0000011100000000b
		DW 0000000010000000b
		DW 0000000010000000b
		DW 0100000010000000b
		DW 0010000100000000b
		DW 0001111000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; T
		DW 1111111110000000b
		DW 0000100000000000b
		DW 0000100000000000b
		DW 0000100000000000b
		DW 0000100000000000b
		DW 0000100000000000b
		DW 0000100000000000b
		DW 0000100000000000b
		DW 0000100000000000b
		DW 0000100000000000b
		DW 0000100000000000b
		DW 0000100000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; U
		DW 0100000000100000b
		DW 0100000000100000b
		DW 0100000000100000b
		DW 0100000000100000b
		DW 0100000000100000b
		DW 0100000000100000b
		DW 0100000000100000b
		DW 0100000000100000b
		DW 0100000000100000b
		DW 0100000000100000b
		DW 0100000000100000b
		DW 0010000001000000b
		DW 0001111110000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ;V
		DW 0100000001000000b
		DW 0100000001000000b
		DW 0100000001000000b
		DW 0010000010000000b
		DW 0010000010000000b
		DW 0001000100000000b
		DW 0001000100000000b
		DW 0001000100000000b
		DW 0000101000000000b
		DW 0000101000000000b
		DW 0000010000000000b
		DW 0000010000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; W
		DW 0100000010000001b
		DW 0100000010000001b
		DW 0100000101000001b
		DW 0010000101000010b
		DW 0010000101000010b
		DW 0010001000100010b
		DW 0010001000100010b
		DW 0001010000010100b
		DW 0001010000010100b
		DW 0001010000010100b
		DW 0000100000001000b
		DW 0000100000001000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; X
		DW 0100000001000000b
		DW 0010000010000000b
		DW 0001000100000000b
		DW 0001000100000000b
		DW 0000101000000000b
		DW 0000010000000000b
		DW 0000010000000000b
		DW 0000101000000000b
		DW 0001000100000000b
		DW 0001000100000000b
		DW 0010000010000000b
		DW 0100000001000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; Y
		DW 0100000001000000b
		DW 0010000010000000b
		DW 0010000010000000b
		DW 0001000100000000b
		DW 0000101000000000b
		DW 0000101000000000b
		DW 0000010000000000b
		DW 0000010000000000b
		DW 0000010000000000b
		DW 0000010000000000b
		DW 0000010000000000b
		DW 0000010000000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

		DW 0000000000000000b ; Z
		DW 0111111111000000b
		DW 0000000001000000b
		DW 0000000010000000b
		DW 0000000100000000b
		DW 0000001000000000b
		DW 0000010000000000b
		DW 0000010000000000b
		DW 0000100000000000b
		DW 0001000000000000b
		DW 0010000000000000b
		DW 0100000000000000b
		DW 0111111111000000b
		DW 0000000000000000b
		DW 0000000000000000b
		DW 0000000000000000b

.code
;---------------------------------------------------------------------------
; Reads number from input until ENTER is pressed
; EAX - resulting number
PUBLIC read_number
read_number PROC
	xor EBX, EBX

_read_number_loop:
	xor EAX, EAX
	int 16h

	cmp AL,	'0'
    jb _read_number_end
    cmp AL,	'9'
    ja _read_number_end

    push EBX
    push AX
    call print_letter
    pop AX
    pop EBX

	sub AL, 30h
	cbw
	cwd
	push EAX
    mov EAX, EBX
    mov ECX, 10
    mul ECX
    mov EBX, EAX
    pop EAX
    add EBX, EAX
    jmp _read_number_loop

_read_number_end:
	mov EAX, EBX
	ret

read_number ENDP

;---------------------------------------------------------------------------
; Take X and Y coords and calc OFFSTs
; bit off = X mod 8
; byte off = Y * 80 + X div 8
; EAX : first 16 - byte OFFST, last 8 - bit OFFST
PUBLIC calc_offset
calc_offset PROC

	push EBP	
	mov EBP, ESP
	push EDX

	xor EAX, EAX
	xor EBX, EBX
	xor ECX, ECX
	xor EDX, EDX

	mov AX, [ebp+6]		; load X
	mov BX, [ebp+8] 	; load Y
	
	mov DX, AX 			; X -> DX
	mov CL, 3 			; shift 3 (2^3 = 8)
	shr AX, CL 			; x div 8 -> AX
	and DL, 07h 		; x mod 8 -> DL
	
	mov CL, 4 			; shift 4 (2^4 = 16)
	sal BX, CL 			; Y * 16 -> BX
	add AX, BX 			; 16Y + x div 8 -> AX
	mov CL, 2 			; shift 2 (2^2 = 4))
	sal BX, CL 			; Y * 64 -> BX
	add AX, BX 			; 80y + x div 8 -> AX

	mov CL, 16			; shift 16
	sal EAX, CL 		; byte off -> high 16
	add AL, DL 			; x mod 8 -> AL

	pop EDX
	mov ESP, EBP 		;Deallocate local (jic)
	pop EBP
	ret

calc_offset ENDP

PUBLIC is_pixel_painted
is_pixel_painted PROC

	push EBP	
	mov EBP, ESP
	push EDX

	mov AX, [EBP+8] 			
	push AX

	mov AX, [EBP+6]
	push AX
	
	call calc_offset

	add ESP, 4

	xor EBX, EBX
	xor ECX, ECX
	xor EDX, EDX

	mov DL, AL 			; bit off -> DL
	mov CL, 16			; shift 16
	shr EAX, CL 		; byte off -> AX
	mov BX, AX			; AX -> BX

	mov AL, 10000000b
	mov CL, DL
	shr AL, CL

	mov CL, ES:[BX]
	
	and CL, AL

	mov EAX, 0000000FFh
	cmp CL, 0
	jne _ipp_end
	xor EAX, EAX

_ipp_end:

	pop EDX
	mov ESP, EBP 		;Deallocate local (jic)
	pop EBP
	ret

is_pixel_painted ENDP

PUBLIC print_al
print_al PROC

	push ebp
	mov ebp, esp
	push EAX
	push EBX
	push ECX
	push EDX

	xor EBX, EBX
	xor ECX, ECX
	xor EDX, EDX

	mov BL, AL
	xor EAX, EAX
	mov CL, 8

_loop1:
	xor EAX, EAX
	rol BL, 1
	mov AL, BL
	and AL, 00000001b

	mov DL, AL
	add DL, 48
	xor EAX, EAX
	mov AH, 2
	int 21h

	sub CL, 1
	jz _print_al_end
	jmp _loop1
_print_al_end:

	pop EDX
	pop ECX
	pop EBX
	pop EAX
	mov esp, ebp 		;Deallocate local (jic)
	pop ebp
	ret

print_al ENDP

PUBLIC clear_screen
clear_screen PROC

;---------------------------------------------------------------------------

	xor DI,	DI			; DI = 0
	mov	CX,	28000		; counter 
	mov	AL,	0FFh 		; 
	rep	STOSB			; Fill block containing (E)CX bytes starting with address ES:(E)DI with ALs
	ret

clear_screen ENDP

PUBLIC set_offst
set_offst PROC

	mov [OFFST], AX
	ret

set_offst ENDP

PUBLIC print_letter
print_letter PROC

	push ebp
	mov ebp, esp
	push edx

	xor EAX, EAX
	xor EBX, EBX
	xor ECX, ECX
	xor EDX, EDX

	MOV DX, 3C4h 	; указатель на адресный регистр
 	MOV AL, 2 		; индекс регистра маски цвета
 	OUT DX, AL 		; устанавливаем адрес регистра маски
 	INC DX 			; адрес регистра данных
 	MOV AL, 06h 	; код цвета (синий)
 	OUT DX, AL 		; посылаем код цвета в контроллер

	xor EAX, EAX
	xor EBX, EBX
	xor ECX, ECX
	xor EDX, EDX

	mov AX, [ebp+6]		; load letter number
	cbw
	sub AX, ' '
	mov SI, AX
	mov CL, 5 			; shift 5 (2^5 = 21)
	sal SI, CL 			; Ln * 32 -> SI
	mov CX, 0
	mov BX, [OFFST]
	
_print_letter_loop:
	push BX				; save current OFFST

	mov BX, 0FFFFh		; 11111111 -> AL
	xor DH, DH
	and BX, LETTERS+[SI]	; B1 mask

	mov DX, 3CEh
	mov AL, 8
 	out DX, AL
 	inc DX
 	mov AL, BH
 	out DX, AL 			; set bit mask

 	pop BX
 	mov AL, ES:[BX]
 	mov AL, 000h
 	mov ES:[BX], AL 	; paint 1st byte

 	push BX				; save current OFFST

	mov BX, 0FFFFh		; 11111111 -> AL
	xor DH, DH
	and BX, LETTERS+[SI]	; B1 mask
	add SI, 2

	mov DX, 3CEh
	mov AL, 8
 	out DX, AL
 	inc DX
 	mov AL, BL
 	out DX, AL 			; set bit mask

 	pop BX
 	mov AL, ES:[BX + 1]
 	mov AL, 000h
 	mov ES:[BX + 1], AL 	; paint 2nd byte
 	add BX, 80

 	add CX, 2
 	cmp CX, 32
 	je _print_letter_end
	jmp _print_letter_loop

_print_letter_end:	

	mov AX, [OFFST]
	add AX, 2
	mov [OFFST], AX

	pop edx
	mov esp, ebp 		;Deallocate local (jic)
	pop ebp
	ret

print_letter ENDP

PUBLIC mode_choose_message
mode_choose_message PROC

	mov CX, 0
	mov SI, 0
_mode_choose_message_loop:
	xor AH, AH
	mov AL, mode_choose_message_string+[SI]

	push CX
	push SI
	push AX
	call print_letter
	pop AX
	pop SI
	pop CX

	inc SI
	inc CX

	cmp CX, 30
	jl _mode_choose_message_loop

	ret

mode_choose_message ENDP

PUBLIC draw_line_message_x
draw_line_message_x PROC

	mov CX, 0
	mov SI, 0
_draw_line_message_x_loop:
	xor AH, AH
	mov AL, draw_line_message_x_string+[SI]

	push CX
	push SI
	push AX
	call print_letter
	pop AX
	pop SI
	pop CX

	inc SI
	inc CX

	cmp CX, 9
	jl _draw_line_message_x_loop

	ret

draw_line_message_x ENDP

PUBLIC draw_line_message_y
draw_line_message_y PROC

	mov CX, 0
	mov SI, 0
_draw_line_message_y_loop:
	xor AH, AH
	mov AL, draw_line_message_y_string+[SI]

	push CX
	push SI
	push AX
	call print_letter
	pop AX
	pop SI
	pop CX

	inc SI
	inc CX

	cmp CX, 9
	jl _draw_line_message_y_loop

	ret

draw_line_message_y ENDP

PUBLIC draw_line_message_l
draw_line_message_l PROC

	mov CX, 0
	mov SI, 0
_draw_line_message_l_loop:
	xor AH, AH
	mov AL, draw_line_message_l_string+[SI]

	push CX
	push SI
	push AX
	call print_letter
	pop AX
	pop SI
	pop CX

	inc SI
	inc CX

	cmp CX, 9
	jl _draw_line_message_l_loop

	ret

draw_line_message_l ENDP

PUBLIC draw_line_message_r
draw_line_message_r PROC

	mov CX, 0
	mov SI, 0
_draw_line_message_r_loop:
	xor AH, AH
	mov AL, draw_line_message_r_string+[SI]

	push CX
	push SI
	push AX
	call print_letter
	pop AX
	pop SI
	pop CX

	inc SI
	inc CX

	cmp CX, 9
	jl _draw_line_message_r_loop

	ret

draw_line_message_r ENDP

PUBLIC draw_line_message_md
draw_line_message_md PROC

	mov CX, 0
	mov SI, 0
_draw_line_message_md_loop:
	xor AH, AH
	mov AL, draw_line_message_md_string+[SI]

	push CX
	push SI
	push AX
	call print_letter
	pop AX
	pop SI
	pop CX

	inc SI
	inc CX

	cmp CX, 12
	jl _draw_line_message_md_loop

	ret

draw_line_message_md ENDP

PUBLIC draw_line_message_x1
draw_line_message_x1 PROC
	mov CX, 0
	mov SI, 0

_draw_line_message_x1_loop:
	xor AH, AH
	mov AL, draw_line_message_x1_string+[SI]

	push CX
	push SI
	push AX
	call print_letter
	pop AX
	pop SI
	pop CX

	inc SI
	inc CX

	cmp CX, 10
	jl _draw_line_message_x1_loop

	ret

draw_line_message_x1 ENDP

PUBLIC draw_line_message_y1
draw_line_message_y1 PROC

	mov CX, 0
	mov SI, 0
_draw_line_message_y1_loop:
	xor AH, AH
	mov AL, draw_line_message_y1_string+[SI]

	push CX
	push SI
	push AX
	call print_letter
	pop AX
	pop SI
	pop CX

	inc SI
	inc CX

	cmp CX, 10
	jl _draw_line_message_y1_loop

	ret

draw_line_message_y1 ENDP

PUBLIC draw_line_message_x2
draw_line_message_x2 PROC
	
	mov CX, 0
	mov SI, 0
_draw_line_message_x2_loop:
	xor AH, AH
	mov AL, draw_line_message_x2_string+[SI]

	push CX
	push SI
	push AX
	call print_letter
	pop AX
	pop SI
	pop CX

	inc SI
	inc CX

	cmp CX, 10
	jl _draw_line_message_x2_loop

	ret

draw_line_message_x2 ENDP

PUBLIC draw_line_message_y2
draw_line_message_y2 PROC

	mov CX, 0
	mov SI, 0
_draw_line_message_y2_loop:
	xor AH, AH
	mov AL, draw_line_message_y2_string+[SI]

	push CX
	push SI
	push AX
	call print_letter
	pop AX
	pop SI
	pop CX

	inc SI
	inc CX

	cmp CX, 10
	jl _draw_line_message_y2_loop

	ret

draw_line_message_y2 ENDP

end